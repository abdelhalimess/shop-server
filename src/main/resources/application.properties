# --- SERVER ---
server.port=8080
# Afficher les messages d'erreur complets pour le debug (utile pour le TP)
server.error.include-message=always

# --- DATASOURCE (PostgreSQL) ---
# Note: Docker surchargera ces valeurs via les variables d'environnement SPRING_DATASOURCE_...
spring.datasource.driver-class-name=org.postgresql.Driver
# Valeur par défaut pour le développement local (hors docker)
spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=1234

# --- JPA / HIBERNATE ---
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true
spring.jpa.open-in-view=false


spring.jpa.hibernate.ddl-auto=update

# Fix pour Postgres (évite certaines erreurs de métadonnées JDBC)
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.search.backend.analysis.configurer=bean:shopAnalysisConfigurer
spring.jpa.properties.hibernate.search.schema_management.strategy=drop-and-create
# --- HIBERNATE SEARCH (ELASTICSEARCH) ---
# Configuration pour la version 6/7
# Utilise la variable d'environnement ES_URL définie dans docker-compose
# Format: http://host:port. Défaut: localhost:9200
spring.jpa.properties.hibernate.search.backend.uris=http://${ES_URL:localhost:9200}

# Stratégie de gestion du schéma Elasticsearch au démarrage
# "drop-and-create" permet de recréer les index proprement à chaque redémarrage (bon pour le dev)
spring.jpa.properties.hibernate.search.schema-management.strategy=drop-and-create

# --- LOGGING ---
logging.level.root=INFO
logging.level.org.hibernate.search=INFO
logging.level.fr.full-stack=DEBUG